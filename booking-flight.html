<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Register Here</title>
        <link rel="icon" href="./assets/files/logo.png" />
        <link rel="stylesheet" type="text/css" href="./assets/css/style.css" />
        <link
            rel="stylesheet"
            type="text/css"
            href="./assets/css/booking.css"
        />
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Paytone+One&family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap"
            rel="stylesheet"
        />
    </head>

    <body>
        <div>
            <nav>
                <img
                    src="./assets/files/logo.png"
                    class="logo"
                    alt="Logo"
                    title="FirstFlight Travels"
                />
                <ul class="navbar">
                    <li>
                        <a href="index.html">Home</a>
                        <a href="./index.html#package">Packages</a>
                        <a href="./index.html#locations">Locations</a>
                        <a href="./info.html">About Us</a>
                        <a href="./contact.html">Contact Us</a>
                    </li>
                </ul>
            </nav>
        </div>

        <div class="booking">
            <h1>Booking Online Now</h1>
            <p>Please fill out this form with the required information</p>
            <form id="booking-form">
                <fieldset>
                    <label
                        >First Name: *
                        <input
                            type="text"
                            class="data"
                            name="firstname"
                            placeholder="Enter first name"
                            required
                    /></label>
                    <label
                        >Last Name: *
                        <input
                            type="text"
                            name="lastname"
                            placeholder="Enter last name"
                            required
                        />
                    </label>
                    <label
                        >Source
                        <input
                            type="text"
                            name="source"
                            placeholder="Source"
                            required
                        />
                    </label>
                    <label
                        >Destination
                        <input
                            type="text"
                            name="destination"
                            placeholder="Destination"
                            required
                        />
                    </label>

                    <label
                        >Travel date: *
                        <input type="date" name="travel_date" required />
                    </label>
                </fieldset>
                <input type="submit" value="Submit" class="submit-btn" />
            </form>
        </div>

        <section class="footer">
            <div class="foot">
                <div class="footer-content">
                    <div class="footlinks">
                        <h4>Quick Links</h4>
                        <ul>
                            <li><a href="./booking.html">Register</a></li>
                            <li><a href="./info.html">About Us</a></li>
                            <li><a href="./contact.html">Contact Us</a></li>
                        </ul>
                    </div>

                    <div class="footlinks">
                        <h4>Connect</h4>
                        <div class="social">
                            <a
                                href="https://www.facebook.com/profile.php?id=100007787415175"
                                target="_blank"
                                ><i class="bx bxl-facebook"></i
                            ></a>
                            <a
                                href="https://www.instagram.com/iamit010/"
                                target="_blank"
                                ><i class="bx bxl-instagram"></i
                            ></a>
                            <a
                                href="https://twitter.com/sarcasmit_"
                                target="_blank"
                                ><i class="bx bxl-twitter"></i
                            ></a>
                            <a
                                href="https://www.linkedin.com/in/amit-kumar-singh-475b36212/"
                                target="_blank"
                                ><i class="bx bxl-linkedin"></i
                            ></a>
                            <a
                                href="https://github.com/iamit010"
                                target="_blank"
                                ><i class="bx bxl-github"></i
                            ></a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="end">
                <p>
                    Copyright Â© 2023 Adventour All Rights Reserved.<br />Website
                    developed by: Amit Kumar Singh
                </p>
            </div>
        </section>

        <!-- Footer -->

        <!-- Javascript -->

        <script>
            document.addEventListener("DOMContentLoaded", function () {
                const form = document.getElementById("booking-form");

                form.addEventListener("submit", async function (event) {
                    event.preventDefault(); // Prevents default form submission

                    const formData = new FormData(form);

                    // Convert FormData to JSON format
                    const data = Object.fromEntries(formData.entries());

                    // API endpoint
                    const endpoint = "http://localhost:3000/api/flights";

                    try {
                        // Make API request
                        const response = await fetch(endpoint, {
                            method: "POST",
                            headers: {
                                "Content-Type": "application/json",
                            },
                            body: JSON.stringify(data),
                        });

                        // Check if the request was successful
                        if (response.ok) {
                            alert("flight booked successfully!");
                            form.reset(); // Optionally, reset the form
                        } else {
                            const errorData = await response.json();
                            alert(`Error: ${errorData.message}`);
                        }
                    } catch (error) {
                        console.error("Error booking flight:", error);
                        alert(
                            "An error occurred while booking the flight"
                        );
                    }
                });
            });
        </script>
    </body>
</html>
